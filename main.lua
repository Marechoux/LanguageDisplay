local realms = {}
-- US
realms[1] = {["aegwynn"] = "en_US", ["aeriepeak"] = "en_US", ["agamaggan"] = "en_US", ["aggramar"] = "en_US", ["akama"] = "en_US", ["alexstrasza"] = "en_US", ["alleria"] = "en_US", ["altarofstorms"] = "en_US", ["alteracmountains"] = "en_US", ["amanthul"] = "en_US", ["andorhal"] = "en_US", ["anetheron"] = "en_US", ["antonidas"] = "en_US", ["anubarak"] = "en_US", ["anvilmar"] = "en_US", ["arathor"] = "en_US", ["archimonde"] = "en_US", ["area52"] = "en_US", ["argentdawn"] = "en_US", ["arthas"] = "en_US", ["arygos"] = "en_US", ["auchindoun"] = "en_US", ["azgalor"] = "en_US", ["azjolnerub"] = "en_US", ["azralon"] = "pt_BR", ["azshara"] = "en_US", ["azuremyst"] = "en_US", ["baelgun"] = "en_US", ["balnazzar"] = "en_US", ["barthilas"] = "en_US", ["blackdragonflight"] = "en_US", ["blackhand"] = "en_US", ["blackrock"] = "en_US", ["blackwaterraiders"] = "en_US", ["blackwinglair"] = "en_US", ["bladesedge"] = "en_US", ["bladefist"] = "en_US", ["bleedinghollow"] = "en_US", ["bloodfurnace"] = "en_US", ["bloodhoof"] = "en_US", ["bloodscalp"] = "en_US", ["bonechewer"] = "en_US", ["boreantundra"] = "en_US", ["boulderfist"] = "en_US", ["bronzebeard"] = "en_US", ["burningblade"] = "en_US", ["burninglegion"] = "en_US", ["caelestrasz"] = "en_US", ["cairne"] = "en_US", ["cenarioncircle"] = "en_US", ["cenarius"] = "en_US", ["chogall"] = "en_US", ["chromaggus"] = "en_US", ["coilfang"] = "en_US", ["crushridge"] = "en_US", ["daggerspine"] = "en_US", ["dalaran"] = "en_US", ["dalvengyr"] = "en_US", ["darkiron"] = "en_US", ["darkspear"] = "en_US", ["darrowmere"] = "en_US", ["dathremar"] = "en_US", ["dawnbringer"] = "en_US", ["deathwing"] = "en_US", ["demonsoul"] = "en_US", ["dentarg"] = "en_US", ["destromath"] = "en_US", ["dethecus"] = "en_US", ["detheroc"] = "en_US", ["doomhammer"] = "en_US", ["draenor"] = "en_US", ["dragonblight"] = "en_US", ["dragonmaw"] = "en_US", ["draktharon"] = "en_US", ["drakthul"] = "en_US", ["draka"] = "en_US", ["drakkari"] = "es_MX", ["dreadmaul"] = "en_US", ["drenden"] = "en_US", ["dunemaul"] = "en_US", ["durotan"] = "en_US", ["duskwood"] = "en_US", ["earthenring"] = "en_US", ["echoisles"] = "en_US", ["eitrigg"] = "en_US", ["eldrethalas"] = "en_US", ["elune"] = "en_US", ["emeralddream"] = "en_US", ["eonar"] = "en_US", ["eredar"] = "en_US", ["executus"] = "en_US", ["exodar"] = "en_US", ["farstriders"] = "en_US", ["feathermoon"] = "en_US", ["fenris"] = "en_US", ["firetree"] = "en_US", ["fizzcrank"] = "en_US", ["frostmane"] = "en_US", ["frostmourne"] = "en_US", ["frostwolf"] = "en_US", ["galakrond"] = "en_US", ["gallywix"] = "pt_BR", ["garithos"] = "en_US", ["garona"] = "en_US", ["garrosh"] = "en_US", ["ghostlands"] = "en_US", ["gilneas"] = "en_US", ["gnomeregan"] = "en_US", ["goldrinn"] = "pt_BR", ["gorefiend"] = "en_US", ["gorgonnash"] = "en_US", ["greymane"] = "en_US", ["grizzlyhills"] = "en_US", ["guldan"] = "en_US", ["gundrak"] = "en_US", ["gurubashi"] = "en_US", ["hakkar"] = "en_US", ["haomarush"] = "en_US", ["hellscream"] = "en_US", ["hydraxis"] = "en_US", ["hyjal"] = "en_US", ["icecrown"] = "en_US", ["illidan"] = "en_US", ["jaedenar"] = "en_US", ["jubeithos"] = "en_US", ["kaelthas"] = "en_US", ["kalecgos"] = "en_US", ["kargath"] = "en_US", ["kelthuzad"] = "en_US", ["khadgar"] = "en_US", ["khazmodan"] = "en_US", ["khazgoroth"] = "en_US", ["kiljaeden"] = "en_US", ["kilrogg"] = "en_US", ["kirintor"] = "en_US", ["korgath"] = "en_US", ["korialstrasz"] = "en_US", ["kultiras"] = "en_US", ["laughingskull"] = "en_US", ["lethon"] = "en_US", ["lightbringer"] = "en_US", ["lightningsblade"] = "en_US", ["lightninghoof"] = "en_US", ["llane"] = "en_US", ["lothar"] = "en_US", ["madoran"] = "en_US", ["maelstrom"] = "en_US", ["magtheridon"] = "en_US", ["maiev"] = "en_US", ["malganis"] = "en_US", ["malfurion"] = "en_US", ["malorne"] = "en_US", ["malygos"] = "en_US", ["mannoroth"] = "en_US", ["medivh"] = "en_US", ["misha"] = "en_US", ["moknathal"] = "en_US", ["moonguard"] = "en_US", ["moonrunner"] = "en_US", ["mugthol"] = "en_US", ["muradin"] = "en_US", ["nagrand"] = "en_US", ["nathrezim"] = "en_US", ["nazgrel"] = "en_US", ["nazjatar"] = "en_US", ["nemesis"] = "pt_BR", ["nerzhul"] = "en_US", ["nesingwary"] = "en_US", ["nordrassil"] = "en_US", ["norgannon"] = "en_US", ["onyxia"] = "en_US", ["perenolde"] = "en_US", ["proudmoore"] = "en_US", ["quelthalas"] = "es_MX", ["queldorei"] = "en_US", ["ragnaros"] = "es_MX", ["ravencrest"] = "en_US", ["ravenholdt"] = "en_US", ["rexxar"] = "en_US", ["rivendare"] = "en_US", ["runetotem"] = "en_US", ["sargeras"] = "en_US", ["saurfang"] = "en_US", ["scarletcrusade"] = "en_US", ["scilla"] = "en_US", ["senjin"] = "en_US", ["sentinels"] = "en_US", ["shadowcouncil"] = "en_US", ["shadowmoon"] = "en_US", ["shadowsong"] = "en_US", ["shandris"] = "en_US", ["shatteredhalls"] = "en_US", ["shatteredhand"] = "en_US", ["shuhalo"] = "en_US", ["silverhand"] = "en_US", ["silvermoon"] = "en_US", ["sistersofelune"] = "en_US", ["skullcrusher"] = "en_US", ["skywall"] = "en_US", ["smolderthorn"] = "en_US", ["spinebreaker"] = "en_US", ["spirestone"] = "en_US", ["staghelm"] = "en_US", ["steamwheedlecartel"] = "en_US", ["stonemaul"] = "en_US", ["stormrage"] = "en_US", ["stormreaver"] = "en_US", ["stormscale"] = "en_US", ["suramar"] = "en_US", ["tanaris"] = "en_US", ["terenas"] = "en_US", ["terokkar"] = "en_US", ["thaurissan"] = "en_US", ["theforgottencoast"] = "en_US", ["thescryers"] = "en_US", ["theunderbog"] = "en_US", ["theventureco"] = "en_US", ["thoriumbrotherhood"] = "en_US", ["thrall"] = "en_US", ["thunderhorn"] = "en_US", ["thunderlord"] = "en_US", ["tichondrius"] = "en_US", ["tolbarad"] = "pt_BR", ["tortheldrin"] = "en_US", ["trollbane"] = "en_US", ["turalyon"] = "en_US", ["twistingnether"] = "en_US", ["uldaman"] = "en_US", ["uldum"] = "en_US", ["undermine"] = "en_US", ["ursin"] = "en_US", ["uther"] = "en_US", ["vashj"] = "en_US", ["veknilash"] = "en_US", ["velen"] = "en_US", ["warsong"] = "en_US", ["whisperwind"] = "en_US", ["wildhammer"] = "en_US", ["windrunner"] = "en_US", ["winterhoof"] = "en_US", ["wyrmrestaccord"] = "en_US", ["ysera"] = "en_US", ["ysondre"] = "en_US", ["zangarmarsh"] = "en_US", ["zuljin"] = "en_US", ["zuluhed"] = "en_US"}
-- KR
realms[2] = {["가로나"] = "ko_KR", ["굴단"] = "ko_KR", ["노르간논"] = "ko_KR", ["달라란"] = "ko_KR", ["데스윙"] = "ko_KR", ["듀로탄"] = "ko_KR", ["렉사르"] = "ko_KR", ["말퓨리온"] = "ko_KR", ["불타는군단"] = "ko_KR", ["세나리우스"] = "ko_KR", ["스톰레이지"] = "ko_KR", ["아즈샤라"] = "ko_KR", ["알렉스트라자"] = "ko_KR", ["와일드해머"] = "ko_KR", ["윈드러너"] = "ko_KR", ["줄진"] = "ko_KR", ["하이잘"] = "ko_KR", ["헬스크림"] = "ko_KR"}
-- EU
realms[3] = {["aeriepeak"] = "en_GB", ["agamaggan"] = "en_GB", ["aggra(português)"] = "pt_PT", ["aggramar"] = "en_GB", ["ahnqiraj"] = "en_GB", ["alakir"] = "en_GB", ["alexstrasza"] = "de_DE", ["alleria"] = "de_DE", ["alonsus"] = "en_GB", ["amanthul"] = "de_DE", ["ambossar"] = "de_DE", ["anachronos"] = "en_GB", ["anetheron"] = "de_DE", ["antonidas"] = "de_DE", ["anubarak"] = "de_DE", ["arakarahm"] = "fr_FR", ["arathi"] = "fr_FR", ["arathor"] = "en_GB", ["archimonde"] = "fr_FR", ["area52"] = "de_DE", ["argentdawn"] = "en_GB", ["arthas"] = "de_DE", ["arygos"] = "de_DE", ["aszune"] = "en_GB", ["auchindoun"] = "en_GB", ["azjolnerub"] = "en_GB", ["azshara"] = "de_DE", ["azuremyst"] = "en_GB", ["baelgun"] = "de_DE", ["balnazzar"] = "en_GB", ["blackhand"] = "de_DE", ["blackmoore"] = "de_DE", ["blackrock"] = "de_DE", ["bladesedge"] = "en_GB", ["bloodfeather"] = "en_GB", ["bloodhoof"] = "en_GB", ["bloodscalp"] = "en_GB", ["blutkessel"] = "de_DE", ["boulderfist"] = "en_GB", ["bronzedragonflight"] = "en_GB", ["bronzebeard"] = "en_GB", ["burningblade"] = "en_GB", ["burninglegion"] = "en_GB", ["burningsteppes"] = "en_GB", ["cthun"] = "es_ES", ["chamberofaspects"] = "en_GB", ["chantséternels"] = "fr_FR", ["chogall"] = "fr_FR", ["chromaggus"] = "en_GB", ["confrérieduthorium"] = "fr_FR", ["conseildesombres"] = "fr_FR", ["crushridge"] = "en_GB", ["cultedelarivenoire"] = "fr_FR", ["daggerspine"] = "en_GB", ["dalaran"] = "fr_FR", ["dalvengyr"] = "de_DE", ["darkmoonfaire"] = "en_GB", ["darkspear"] = "en_GB", ["daskonsortium"] = "de_DE", ["dassyndikat"] = "de_DE", ["deathwing"] = "en_GB", ["defiasbrotherhood"] = "en_GB", ["dentarg"] = "en_GB", ["dermithrilorden"] = "de_DE", ["derratvondalaran"] = "de_DE", ["derabyssischerat"] = "de_DE", ["destromath"] = "de_DE", ["dethecus"] = "de_DE", ["diealdor"] = "de_DE", ["diearguswacht"] = "de_DE", ["dienachtwache"] = "de_DE", ["diesilbernehand"] = "de_DE", ["dietodeskrallen"] = "de_DE", ["dieewigewacht"] = "de_DE", ["doomhammer"] = "en_GB", ["draenor"] = "en_GB", ["dragonblight"] = "en_GB", ["drakthul"] = "en_GB", ["drekthar"] = "fr_FR", ["dunmodr"] = "es_ES", ["dunmorogh"] = "de_DE", ["dunemaul"] = "en_GB", ["durotan"] = "de_DE", ["earthenring"] = "en_GB", ["echsenkessel"] = "de_DE", ["eitrigg"] = "fr_FR", ["eldrethalas"] = "fr_FR", ["elune"] = "fr_FR", ["emeriss"] = "en_GB", ["eonar"] = "en_GB", ["eredar"] = "de_DE", ["executus"] = "en_GB", ["exodar"] = "es_ES", ["festungderstürme"] = "de_DE", ["forscherliga"] = "de_DE", ["frostmane"] = "en_GB", ["frostmourne"] = "de_DE", ["frostwolf"] = "de_DE", ["garona"] = "fr_FR", ["garrosh"] = "de_DE", ["ghostlands"] = "en_GB", ["gilneas"] = "de_DE", ["gorgonnash"] = "de_DE", ["grimbatol"] = "en_GB", ["guldan"] = "de_DE", ["hakkar"] = "en_GB", ["hellfire"] = "en_GB", ["hellscream"] = "en_GB", ["hyjal"] = "fr_FR", ["illidan"] = "fr_FR", ["jaedenar"] = "en_GB", ["kaelthas"] = "fr_FR", ["karazhan"] = "en_GB", ["kargath"] = "de_DE", ["kazzak"] = "en_GB", ["kelthuzad"] = "de_DE", ["khadgar"] = "en_GB", ["khazmodan"] = "fr_FR", ["khazgoroth"] = "de_DE", ["kiljaeden"] = "de_DE", ["kilrogg"] = "en_GB", ["kirintor"] = "fr_FR", ["korgall"] = "en_GB", ["kragjin"] = "de_DE", ["krasus"] = "fr_FR", ["kultiras"] = "en_GB", ["kultderverdammten"] = "de_DE", ["lacroisadeécarlate"] = "fr_FR", ["laughingskull"] = "en_GB", ["lesclairvoyants"] = "fr_FR", ["lessentinelles"] = "fr_FR", ["lightbringer"] = "en_GB", ["lightningsblade"] = "en_GB", ["lordaeron"] = "de_DE", ["loserrantes"] = "es_ES", ["lothar"] = "de_DE", ["madmortem"] = "de_DE", ["magtheridon"] = "en_GB", ["malganis"] = "de_DE", ["malfurion"] = "de_DE", ["malorne"] = "de_DE", ["malygos"] = "de_DE", ["mannoroth"] = "de_DE", ["marécagedezangar"] = "fr_FR", ["mazrigos"] = "en_GB", ["medivh"] = "fr_FR", ["minahonda"] = "es_ES", ["moonglade"] = "en_GB", ["mugthol"] = "de_DE", ["nagrand"] = "en_GB", ["nathrezim"] = "de_DE", ["naxxramas"] = "fr_FR", ["nazjatar"] = "de_DE", ["nefarian"] = "de_DE", ["nemesis"] = "it_IT", ["nerzhul"] = "fr_FR", ["nerathor"] = "de_DE", ["nethersturm"] = "de_DE", ["nordrassil"] = "en_GB", ["norgannon"] = "de_DE", ["nozdormu"] = "de_DE", ["onyxia"] = "de_DE", ["outland"] = "en_GB", ["perenolde"] = "de_DE", ["pozzodelleternità"] = "it_IT", ["proudmoore"] = "de_DE", ["quelthalas"] = "en_GB", ["ragnaros"] = "en_GB", ["rajaxx"] = "de_DE", ["rashgarroth"] = "fr_FR", ["ravencrest"] = "en_GB", ["ravenholdt"] = "en_GB", ["rexxar"] = "de_DE", ["runetotem"] = "en_GB", ["sanguino"] = "es_ES", ["sargeras"] = "fr_FR", ["saurfang"] = "en_GB", ["scarshieldlegion"] = "en_GB", ["senjin"] = "de_DE", ["shatteredhalls"] = "en_GB", ["shatteredhand"] = "en_GB", ["shattrath"] = "de_DE", ["shendralar"] = "es_ES", ["sinstralis"] = "fr_FR", ["skullcrusher"] = "en_GB", ["shadowsong"] = "en_GB", ["silvermoon"] = "en_GB", ["spirestone"] = "es_ES", ["sporeggar"] = "en_GB", ["steamwheedlecartel"] = "en_GB", ["stormrage"] = "en_GB", ["sunstrider"] = "en_GB", ["suramar"] = "fr_FR", ["sylvanas"] = "en_GB", ["taerar"] = "de_DE", ["talnivarr"] = "en_GB", ["tarrenmill"] = "en_GB", ["teldrassil"] = "de_DE", ["templenoir"] = "fr_FR", ["terokkar"] = "en_GB", ["terrordar"] = "de_DE", ["themaelstrom"] = "en_GB", ["theshatar"] = "en_GB", ["theventureco"] = "en_GB", ["theradras"] = "de_DE", ["thrall"] = "de_DE", ["throkferoth"] = "fr_FR", ["thunderhorn"] = "en_GB", ["tichondrius"] = "de_DE", ["tirion"] = "de_DE", ["todeswache"] = "de_DE", ["trollbane"] = "en_GB", ["turalyon"] = "en_GB", ["twilightshammer"] = "en_GB", ["tyrande"] = "es_ES", ["uldaman"] = "fr_FR", ["ulduar"] = "de_DE", ["uldum"] = "es_ES", ["ungoro"] = "de_DE", ["varimathras"] = "fr_FR", ["veklor"] = "de_DE", ["veknilash"] = "en_GB", ["voljin"] = "fr_FR", ["wildhammer"] = "en_GB", ["wrathbringer"] = "de_DE", ["xavius"] = "en_GB", ["ysera"] = "de_DE", ["ysondre"] = "fr_FR", ["zirkeldescenarius"] = "de_DE", ["zuljin"] = "es_ES", ["zuluhed"] = "de_DE", ["азурегос"] = "ru_RU", ["борейскаятундра"] = "ru_RU", ["вечнаяпесня"] = "ru_RU", ["галакронд"] = "ru_RU", ["голдринн"] = "ru_RU", ["гордунни"] = "ru_RU", ["гром"] = "ru_RU", ["дракономор"] = "ru_RU", ["корольлич"] = "ru_RU", ["пиратскаябухта"] = "ru_RU", ["подземье"] = "ru_RU", ["разувий"] = "ru_RU", ["ревущийфьорд"] = "ru_RU", ["свежевательдуш"] = "ru_RU", ["седогрив"] = "ru_RU", ["стражсмерти"] = "ru_RU", ["термоштепсель"] = "ru_RU", ["ткачсмерти"] = "ru_RU", ["ясеневыйлес"] = "ru_RU", ["ЧерныйШрам"] = "ru_RU", ["aegwynn"] = "de_DE", ["ashenvale"] = "ru_RU", ["azuregos"] = "ru_RU", ["blackscar"] = "ru_RU", ["bladefist"] = "en_GB", ["bootybay"] = "ru_RU", ["boreantundra"] = "ru_RU", ["colinaspardas"] = "es_ES", ["darksorrow"] = "en_GB", ["deathguard"] = "ru_RU", ["deathweaver"] = "ru_RU", ["deepholm"] = "ru_RU", ["dragonmaw"] = "en_GB", ["emeralddream"] = "en_GB", ["eversong"] = "ru_RU", ["fordragon"] = "ru_RU", ["frostwhisper"] = "en_GB", ["galakrond"] = "ru_RU", ["genjuros"] = "en_GB", ["goldrinn"] = "ru_RU", ["gordunni"] = "ru_RU", ["greymane"] = "ru_RU", ["grom"] = "ru_RU", ["haomarush"] = "en_GB", ["howlingfjord"] = "ru_RU", ["lichking"] = "ru_RU", ["neptulon"] = "en_GB", ["razuvious"] = "ru_RU", ["soulflayer"] = "ru_RU", ["spinebreaker"] = "en_GB", ["stormreaver"] = "en_GB", ["stormscale"] = "en_GB", ["terenas"] = "en_GB", ["thermaplugg"] = "ru_RU", ["twistingnether"] = "en_GB", ["vashj"] = "en_GB", ["zenedar"] = "en_GB"}
-- TW
realms[4] = {["世界之樹"] = "zh_TW", ["亞雷戈斯"] = "zh_TW", ["冰霜之刺"] = "zh_TW", ["冰風崗哨"] = "zh_TW", ["地獄吼"] = "zh_TW", ["夜空之歌"] = "zh_TW", ["天空之牆"] = "zh_TW", ["寒冰皇冠"] = "zh_TW", ["尖石"] = "zh_TW", ["屠魔山谷"] = "zh_TW", ["巨龍之喉"] = "zh_TW", ["憤怒使者"] = "zh_TW", ["日落沼澤"] = "zh_TW", ["暗影之月"] = "zh_TW", ["水晶之刺"] = "zh_TW", ["狂熱之刃"] = "zh_TW", ["眾星之子"] = "zh_TW", ["米奈希爾"] = "zh_TW", ["聖光之願"] = "zh_TW", ["血之谷"] = "zh_TW", ["語風"] = "zh_TW", ["銀翼要塞"] = "zh_TW", ["阿薩斯"] = "zh_TW", ["雲蛟衛"] = "zh_TW", ["雷鱗"] = "zh_TW"}

local locales = {["de_DE"] = LDL.German, ["en_GB"] = LDL.English, ["en_US"] = LDL.EnglishUS, ["es_ES"] = LDL.Spanish, ["fr_FR"] = LDL.French, ["it_IT"] = LDL.Italian, ["ko_KR"] = LDL.Korean, ["pt_PT"] = LDL.Portuguese, ["ru_RU"] = LDL.Russian, ["zh_TW"] = LDL.Taiwanese, ["pt_BR"] = LDL.PortugueseBr, ["es_MX"] = LDL.SpanishMx}
local locales_codes = {["de_DE"] = "GER", ["en_GB"] = "ENG", ["en_US"] = "ENG", ["es_ES"] = "ESP", ["fr_FR"] = "FRA", ["it_IT"] = "ITA", ["ko_KR"] = "KR", ["pt_PT"] = "PT", ["ru_RU"] = "RUS", ["zh_TW"] = "TW", ["pt_BR"] = "BR", ["es_MX"] = "MEX"}
local locales_codes_colored = {["de_DE"] = "|cFF000000G|cFFff0000E|cFFffff00R|r", ["en_GB"] = "|cFFff0000E|cFFffffffN|r", ["en_US"] = "|cFFff0000E|cFFffffffN|r", ["es_ES"] = "|cFFff1a1aE|cFFffcc00S|cFFff1a1aP|r", ["fr_FR"] = "|cFF0000ffF|cFFffffffR|cFFff0000A|r", ["it_IT"] = "|cFF009900I|cFFffffffT|cFFff1a1aA|r", ["ko_KR"] = "|cFFff1a1aK|cFF0033ccR|r", ["pt_PT"] = "|cFF006600P|cFFff0000T|r", ["ru_RU"] = "|cFFffffffR|cFF0033ccU|cFFff1a1aS|r", ["zh_TW"] = "|cFF0000ffT|cFFff0000W|r", ["pt_BR"] = "|cFF339933B|cFFffff00R|r", ["es_MX"] = "|cFF00802bM|cFFffffE|cFFff1a1aX|r"}

local ADDON = "LanguageDisplay"
local frame = CreateFrame("FRAME")
frame:RegisterEvent("ADDON_LOADED")

frame:SetScript("OnEvent", function(self, event, ...)
    if event == "ADDON_LOADED" and ... == ADDON then
		self:RegisterEvent("UPDATE_MOUSEOVER_UNIT")

		if LDDebug == nil then
			LDDebug = false
		end

		if LDLFGColors == nil then
			LDLFGColors = true
		end
		
		if LDRegion == nil then
			LDRegion = GetCurrentRegion()
		end

		local function OnTooltipSetUnit(self)
			if not self then
				return
			end

			local _, unit = self:GetUnit()
			ShowTooltip(unit)
		end
		
		TooltipDataProcessor.AddTooltipPostCall(Enum.TooltipDataType.Unit, OnTooltipSetUnit)

		-- LFG
		if _G.LFGListApplicationViewerScrollFrameButton1 then
			local hooked = {}
			local OnEnter, OnLeave

			function OnEnter(self)
				if self.applicantID and self.Members then
					for i = 1, #self.Members do
						local b = self.Members[i]
						if not hooked[b] then
							hooked[b] = 1
							b:HookScript("OnEnter", OnEnter)
							b:HookScript("OnLeave", OnLeave)
						end
					end
				elseif self.memberIdx then
					local fullName = C_LFGList.GetApplicantMemberInfo(self:GetParent().applicantID, self.memberIdx)
					if fullName then
						local hasOwner = GameTooltip:GetOwner()
						if not hasOwner then
							GameTooltip:SetOwner(self, "ANCHOR_TOPLEFT", 0, 0)
						end
						ShowTooltipByName(fullName);
					end
				end
			end
			function OnLeave(self)
				if self.applicantID or self.memberIdx then
					GameTooltip:Hide()
				end
			end
			
			local function SetSearchEntryTooltip(tooltip, resultID, autoAcceptOption)
				local results = C_LFGList.GetSearchResultInfo(resultID)
				if not results then
					return
				end
				local activityID = results.activityID
				local leaderName = results.leaderName
				if leaderName then
					ShowTooltipByName(leaderName);
				end
			end
			hooksecurefunc("LFGListUtil_SetSearchEntryTooltip", SetSearchEntryTooltip)
			
			for i = 1, 14 do
				local b = _G["LFGListApplicationViewerScrollFrameButton" .. i]
				b:HookScript("OnEnter", OnEnter)
				b:HookScript("OnLeave", OnLeave)
			end
			do
				local f = LFGListFrame.ApplicationViewer.UnempoweredCover
				f:EnableMouse(false)
				f:EnableMouseWheel(false)
				f:SetToplevel(false)
			end
		end			
    end
end)

--------------- TOOLTIP ------------
function ShowTooltip(target)
	if not (UnitIsPlayer(target)) then
		return
	end
	local _, realm = UnitFullName(target)
	if realm == nil then
		realm = GetRealmName()
	end

	DisplayTooltip(realm:gsub(" ", ""):gsub("'", ""):gsub("’", ""):lower())
end

function ShowTooltipByName(fullname)
	DisplayTooltip(getRealm(fullname))
end

function DisplayTooltip(realm)
	if realm ~= nil and realms[LDRegion] ~= nil and realms[LDRegion][realm] ~= nil then
		local locale = realms[LDRegion][realm]
		if locales[locale] ~= nil then
			locale = locales[locale]
		end
		if locale ~= nil then
			AddTooltipText(format('|cFF0aa79b%s :|r ', LDL.Locale), locale);
		end
	end
end

function AddTooltipText(textLeft, textRight)
	local ttLines = GameTooltip:NumLines();
	local ttUpdated = false;
	
	for i = 1, ttLines do
		if _G["GameTooltipTextLeft"..i]:GetText() == textLeft then
			_G["GameTooltipTextLeft"..i]:SetText(textLeft);
			_G["GameTooltipTextRight"..i]:SetText(textRight);
			GameTooltip:Show();

			ttUpdated = true;
			break;
		end
	end

	if not ttUpdated then
		GameTooltip:AddDoubleLine(textLeft, textRight);
		GameTooltip:Show();
	end
end
------------------------------------

----------------- LFG --------------
function OnLFGListSearchEntryUpdate(self)
    local searchResultInfo = C_LFGList.GetSearchResultInfo(self.resultID)
    local language = getLanguage(searchResultInfo.leaderName, true)
	
	if language ~= nil then
		self.ActivityName:SetFormattedText("%s %s", language, self.ActivityName:GetText())
	end
end

function OnLFGListApplicationViewerUpdateApplicantMember(member, appID, memberIdx, _, _)
    local language = getLanguage(C_LFGList.GetApplicantMemberInfo(appID, memberIdx), true)
	
	if language ~= nil then
		member.Name:SetFormattedText("%s %s", language, member.Name:GetText())
	end    
end

hooksecurefunc("LFGListSearchEntry_Update", OnLFGListSearchEntryUpdate)
hooksecurefunc("LFGListApplicationViewer_UpdateApplicantMember", OnLFGListApplicationViewerUpdateApplicantMember)
------------------------------------

function getLanguage(fullname, code)
	if not fullname then
        return nil
    end

    local realm = getRealm(fullname)
	
	if realm == nil then
		print(format('|cFF0aa79b[LD] |cFF0aa79bRealm not found : %s|r', fullname))
		return 'NF'
	end
	
	local locale = realms[LDRegion][realm]
	
	if locale == nil then
		if LDDebug then
			print(format('|cFF0aa79b[LD] |cFF0aa79bLocale not found : %s|r', realm))
		end
		return 'NF'
	end

	if locales_codes[locale] == nil then
		if LDDebug then
			print(format('|cFF0aa79b[LD] |cFF0aa79bLocale code not found : %s|r', locale))
		end
		return 'NF'
	end

	if locales_codes_colored[locale] == nil then
		if LDDebug then
			print(format('|cFF0aa79b[LD] |cFF0aa79bLocale code colored not found : %s|r', locale))
		end
		return 'NF'
	end

	if code then
		if LDLFGColors then
			locale = format('%s|r|r|r', locales_codes_colored[locale])
		else
			locale = locales_codes[locale]
		end
	elseif locales[locale] ~= nil then
		locale = locales[locale]
	end
	
	return locale
end

function getRealm(fullname)
	if fullname == nil then
		return nil
	end
	
	local realm = fullname:match("%-(.+)")
    if realm then
        realm = realm:gsub(" ", ""):gsub("'", ""):gsub("’", ""):lower()
    else
        realm = GetRealmName():gsub(" ", ""):gsub("'", ""):gsub("’", ""):lower()
    end
	
	return realm
end

SLASH_LANGUAGEDISPLAY1 = "/ld";
SLASH_LANGUAGEDISPLAY2 = "/languagedisplay";
function SlashCmdList.LANGUAGEDISPLAY(msg)
	local command, arg = strsplit(" ", msg)
	
	if command == "lfgcolors" then
		LDLFGColors = not LDLFGColors
		if LDLFGColors then
			print(format("|cFF0aa79b[LD] |r%s", LDL.ColorsEnabled));
		else
			print(format("|cFF0aa79b[LD] |r%s", LDL.ColorsDisabled));
		end
	elseif command == "region" then
		local regions = {[1] = "US", [2] = "KR", [3] = "EU", [4] = "TW"}
		local arg = tonumber(msg)
		if arg == nil or arg < 0 or arg > 4 then
			print(format("|cFF0aa79b[LD] |r%s: |cFF0aa79b%s |r(|cFF0aa79b%s|r)", LDL.CurrentRegion, LDRegion, regions[LDRegion]))
			local buffer = format("|cFF0aa79b[LD] |r%s:", LDL.AvailableRegions)
			for k, v in pairs(regions) do
				buffer = format("%s |cFF0aa79b%s|r (|cFF0aa79b%s|r)", buffer, k, v)
			end
			print(buffer)
		else
			LDRegion = arg
			print(format("|cFF0aa79b[LD] |r%s |cFF0aa79b%s |r(|cFF0aa79b%s|r)", LDL.RegionChange, LDRegion, regions[LDRegion]));
		end
	elseif command == "debug" then
		LDDebug = not LDDebug
		if LDDebug then
			print(format("|cFF0aa79b[LD] |r%s", LDL.DebugEnabled));
		else
			print(format("|cFF0aa79b[LD] |r%s", LDL.DebugDisabled));
		end
	else
		print("|cFF0aa79b[LD] |rAvailable commands: |cFF0aa79bregion lfgcolors")
	end
end